import{Controller as t}from"@hotwired/stimulus";class o extends t{connect(){this._umountComponentPromise=this.mountComponent(this.mountElement,this.resolvedComponent,this.componentProps)}disconnect(){this.umountComponent()}propsValueChanged(){this.umountComponent(),this._umountComponentPromise=this.mountComponent(this.mountElement,this.resolvedComponent,this.componentProps)}get componentProps(){return this.propsValue}get mountElement(){return this.element}get resolvedComponent(){return this.resolveComponent(this.componentValue)}umountComponent(){this._umountComponentPromise?.then((t=>t())),this._umountComponentPromise=void 0}resolveComponent(t){return this.application.turboMount[this.framework].resolve(t)}}o.values={props:Object,component:String};class e extends o{constructor(){super(...arguments),this.framework="react"}async mountComponent(t,o,e){const{createRoot:r}=await import("react-dom/client"),n=r(t),{createElement:s}=await import("react");return n.render(s(o,e)),n.unmount}}class r extends o{constructor(){super(...arguments),this.framework="svelte"}async mountComponent(t,o,e){return new o({target:t,props:e}).$destroy}}class n extends o{constructor(){super(...arguments),this.framework="vue"}async mountComponent(t,o,e){const{createApp:r}=await import("vue"),n=r(o,e);return n.mount(t),n.unmount}}class s{constructor(t){var o;if(this.components=new Map,this.application=t.application,this.framework=t.framework,this.baseController=void 0,!this.framework)throw new Error("framework is required");(o=this.application).turboMount||(o.turboMount={}),this.application.turboMount[this.framework]=this,this.baseController=s.frameworkControllers.get(this.framework),this.baseController&&this.application.register(`turbo-mount-${this.framework}`,this.baseController)}register(t,o,e){if(e||(e=this.baseController),this.components.has(t))throw new Error(`Component '${t}' is already registered.`);if(this.components.set(t,o),e){const o=`turbo-mount-${this.framework}-${this.camelToKebabCase(t)}`;this.application.register(o,e)}}resolve(t){const o=this.components.get(t);if(!o)throw new Error(`Unknown component: ${t}`);return o}camelToKebabCase(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}s.frameworkControllers=new Map,s.frameworkControllers.set("react",e),s.frameworkControllers.set("svelte",r),s.frameworkControllers.set("vue",n);export{s as TurboMount,o as TurboMountController,e as TurboMountReactController,r as TurboMountSvelteController,n as TurboMountVueController};
//# sourceMappingURL=turbo-mount.min.js.map
